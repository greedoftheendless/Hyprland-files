// ========== INPUT CONFIGURATION ==========
input {
    keyboard {
        xkb {
            layout "us"
        }
        repeat-delay 600
        repeat-rate 25
    }

    touchpad {
        tap
        natural-scroll
        dwt
        dwtp
        accel-speed 0.0
    }

    mouse {
        accel-speed 0.0
    }

    focus-follows-mouse
}

// Make workspaces four times smaller than normal in the overview.
overview {
    zoom 0.3
    backdrop-color "#777777"
}

// ========== LAYOUT CONFIGURATION ==========
layout {
    gaps 2
    center-focused-column "never"

    preset-column-widths {
        proportion 0.33333
        proportion 0.5
        proportion 0.66667
    }

    default-column-width { proportion 0.5; }

    focus-ring {
        width 2
        active-color "#33ccff"
        inactive-color "#595959"
    }

    border {
        width 2
        active-color "#33ccff"
        inactive-color "#595959"
    }
}

// ========== DECORATION & APPEARANCE ==========
prefer-no-csd

cursor {
    xcursor-theme "Adwaita"
    xcursor-size 24
}

// ========== ANIMATIONS ==========
animations {
    slowdown 1.0

    window-open {
        duration-ms 400
        curve "ease-out-expo"
    }

    window-close {
        duration-ms 333
        curve "ease-out-expo"
    }

    window-resize {
        duration-ms 400
        curve "ease-out-expo"
    }

    workspace-switch {
        duration-ms 333
        curve "ease-out-cubic"
    }

    horizontal-view-movement {
        duration-ms 333
        curve "ease-out-cubic"
    }

    config-notification-open-close {
        duration-ms 250
        curve "ease-out-quad"
    }
}

// ========== KEYBINDINGS ==========
binds {
    // Basic window management
    Mod+Return { spawn "ghostty"; }
    Mod+Q { close-window; }
    Mod+E { spawn "nemo"; }
    //Mod+Space { spawn "cosmic-launcher"; }
    Mod+Space { spawn "rofi" "-show" "drun"; }
    Mod+L { spawn "hyprlock"; }
    Mod+D { "toggle-overview";}

    // Window navigation (focus) using arrow keys
    Mod+Left { focus-column-left; }
    Mod+Right { focus-column-right; }

    // Window floating rules
    Mod+V { toggle-window-floating; }
    Alt+V { switch-focus-between-floating-and-tiling; }

    // Move windows
    // Removed duplicate conflicting binds for Mod+Shift+H/L
    Mod+Shift+H { move-column-right; }
    Mod+Shift+L { move-column-left; }

    // Move window to different monitor
    Mod+Ctrl+H { move-column-to-monitor-left; }
    Mod+Ctrl+L { move-column-to-monitor-right; }

    // Applications
    Mod+F { fullscreen-window; }
    Mod+Shift+P { spawn "wlogout"; }
    Mod+B { spawn "zen-beta"; }
    Mod+Shift+Comma { spawn "waypaper"; }
    Mod+Alt+H { spawn "better-control"; }
    Mod+Alt+L { spawn "copyq" "toggle"; }
    Mod+Shift+Space { spawn "rofi" "-show" "ssh"; }

    // Overview mode (workspace overview)
    Mod+Tab { show-hotkey-overlay; }

    // Screenshots
    Shift+F5 { spawn "hyprshot" "-m" "region"; }

    // Workspace switching 1-9
    Mod+1 { focus-workspace 1; }
    Mod+2 { focus-workspace 2; }
    Mod+3 { focus-workspace 3; }
    Mod+4 { focus-workspace 4; }
    Mod+5 { focus-workspace 5; }
    Mod+6 { focus-workspace 6; }
    Mod+7 { focus-workspace 7; }
    Mod+8 { focus-workspace 8; }
    Mod+9 { focus-workspace 9; }

    // Move windows to workspaces (1-9)
    Mod+Shift+1 { move-column-to-workspace 1; }
    Mod+Shift+2 { move-column-to-workspace 2; }
    Mod+Shift+3 { move-column-to-workspace 3; }
    Mod+Shift+4 { move-column-to-workspace 4; }
    Mod+Shift+5 { move-column-to-workspace 5; }
    Mod+Shift+6 { move-column-to-workspace 6; }
    Mod+Shift+7 { move-column-to-workspace 7; }
    Mod+Shift+8 { move-column-to-workspace 8; }
    Mod+Shift+9 { move-column-to-workspace 9; }
    Mod+Shift+0 { move-column-to-workspace 10; }

    // Workspace navigation with mouse (removed allow-when)
    Mod+WheelScrollDown { focus-workspace-down; }
    Mod+WheelScrollUp { focus-workspace-up; }
    Mod+Up { focus-workspace-up; }
    Mod+Down { focus-workspace-down; }


    // Window resizing
    Mod+Shift+Right { set-column-width "+10%"; }
    Mod+Shift+Left { set-column-width "-10%"; }

    // Preset column widths cycling
    Mod+R { switch-preset-column-width; }
    Mod+Shift+R { reset-window-height; }

    // Consume or expel window from column
    Mod+Comma { consume-window-into-column; }
    Mod+Period { expel-window-from-column; }

    // Alternative resize mode
    Mod+A { switch-preset-column-width; }

    // Multimedia keys
    XF86AudioRaiseVolume { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "5%+"; }
    XF86AudioLowerVolume { spawn "wpctl" "set-volume" "@DEFAULT_AUDIO_SINK@" "5%-"; }
    XF86AudioMute { spawn "wpctl" "set-mute" "@DEFAULT_AUDIO_SINK@" "toggle"; }
    XF86AudioMicMute { spawn "wpctl" "set-mute" "@DEFAULT_AUDIO_SOURCE@" "toggle"; }
    XF86MonBrightnessUp { spawn "brightnessctl" "s" "10%+"; }
    XF86MonBrightnessDown { spawn "brightnessctl" "s" "10%-"; }
}

// ========== WINDOW RULES ==========
window-rule {
draw-border-with-background false

    match app-id="zen-beta"
    opacity 0.95

}

// ========== SPAWN AT STARTUP ==========
spawn-at-startup "ghostty"
spawn-at-startup "waybar"
spawn-at-startup "hypridle"
spawn-at-startup "waypaper" "--restore"
spawn-at-startup "caffeine"
spawn-at-startup "swaync"
spawn-at-startup "zen-beta"
spawn-at-startup "copyq"
//spawn-at-startup "sh" "-c" "wal -R && ~/.config/hypr/scripts/wal-theme.sh"

// ========== OUTPUT CONFIGURATION ==========
 output "eDP-1" {
     mode "1920x1080@120"
//     scale 1.0
//     transform "normal"
//     position x=0 y=0
 }

// ========== MISC SETTINGS ==========
screenshot-path "~/Pictures/Screenshots/screenshot-%Y-%m-%d-%H-%M-%S.png"

hotkey-overlay {
    skip-at-startup
}

// Debug settings (optional)
debug {
    wait-for-frame-completion-before-queueing
    render-drm-device "/dev/dri/renderD128"
}

// ========== ENVIRONMENT VARIABLES ==========
environment {
    HYPRSHOT_DIR "/home/greed/Pictures/Screenshots"
}
